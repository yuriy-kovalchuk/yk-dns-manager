   name: CI

   on:
     push:
       branches: [ master ]
     pull_request:
       branches: [ master ]

   jobs:
     test:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v4

         - name: Set up Go
           uses: actions/setup-go@v5
           with:
             go-version: '1.26'

         - name: Verify dependencies
           run: go mod verify

         - name: Run fmt
           run: make fmt

         - name: Run vet
           run: make vet

         - name: Run Unit Tests
           run: make test-unit

         - name: Lint Helm Chart
           run: helm lint charts/yk-dns-manager
